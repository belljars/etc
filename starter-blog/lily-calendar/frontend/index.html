<!DOCTYPE html>
<html lang="fi">
    <!-- Meta tiedot -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kalenteri, jossa voit lisätä, muokata ja poistaa tapahtumia.">
    <meta name="keywords" content="kalenteri, tapahtumat, muistiinpanot, luokkaus, JavaScript">
    <meta name="author" content="Alina S.">
    <head>
        <meta charset="UTF-8">
        <title>Kalenteri</title>
    </head>
    <body>
        <header>
            <h1>Kalenteri</h1>
            <div id="tervehdys"></div>
        </header>
        <div id="main-container">
            <div id="kuukausi-ohjaimet">
                <button id="edellinenKuukausi"></button>
                <span id="kalenteriKuukausiOsoite"></span>
                <button id="seuraavaKuukausi"></button>
                <button id="vaihdaNakemys" type="button">Viikkonäkymä</button>
            </div>
            <div id="kuukausi"></div>
            <button id="openTapahtumaModalNappi" type="button">Lisää tapahtuma</button>

            <div id="tapahtumaModal" class="modal" style="display:none;">
                <div class="modal-sisalto">
                    <span class="close" id="closetapahtumaModal">&times;</span>
                    <form id="tapahtumaLomake">
                        <input type="text" id="nimi" placeholder="Nimi" required autocomplete="off">
                        <input type="date" id="alku_pvm" required>
                        <input type="time" id="alku_aika" required>
                        <input type="date" id="loppu_pvm" required>
                        <input type="time" id="loppu_aika" required>
                        <input type="text" id="kuvaus" placeholder="Kuvaus" autocomplete="off">
                        <input type="text" id="luokkaus" placeholder="Luokkaus" autocomplete="off" list="luokkaus-lista">
                        <div id="kategoriaVaroitus"></div>
                        <label for="tarkeys">Tärkeys</label>
                        <select namr="tarkeys" id="tarkeys">
                            <option value="0">Ei tärkeä</option>
                            <option value="1">Tärkeä</option>
                            <option value="2">Erittäin tärkeä</option>
                        </select>
                        <label for="toistuva">Toistuvuus:</label>
                        <select id="toistuva" name="toistuva">
                            <option value="">Ei toistuva</option>
                            <option value="päivä">Päivittäin</option>
                            <option value="viikko">Viikoittain</option>
                            <option value="kuukausi">Kuukausittain</option>
                        </select>
                        <div id="toistuvaLisavalinnat" style="display:none;">
                            <label for="toistuva_maara">Toistojen määrä:</label>
                            <input type="number" id="toistuva_maara" min="1" value="1">
                            <label for="toistuva_loppuu_pvm">Loppuu viimeistään:</label>
                            <input type="date" id="toistuva_loppuu_pvm">
                            <label for="toistuva_interval">Väli (esim. joka 2. päivä):</label>
                            <input type="number" id="toistuva_interval" min="1" value="1">
                            <span id="kuukausiHelper" style="display:none;">
                              Toistuu kuukauden samana päivänä (esim. joka kuun 31. päivä siirtyy kuun viimeiseen päivään, jos sitä ei ole).
                            </span>
                            <div id="viikonpaivat_valinta" style="display:none;">
                                <label>Viikonpäivät:</label>
                                <label>
                                    <input type="checkbox" value="0">Ma </label>
                                <label>
                                    <input type="checkbox" value="1">Ti </label>
                                <label>
                                    <input type="checkbox" value="2">Ke </label>
                                <label>
                                    <input type="checkbox" value="3">To </label>
                                <label>
                                    <input type="checkbox" value="4">Pe </label>
                                <label>
                                    <input type="checkbox" value="5">La </label>
                                <label>
                                    <input type="checkbox" value="6">Su </label>
                            </div>
                        </div>
                        <button type="submit">Lisää tapahtuma</button>
                        <button type="button" id="cleartapahtumaLomakeNappi">Tyhjennä lomake</button>
                    </form>
                </div>
            </div>
            <div id="editTapahtumaModal" class="modal" style="display:none;">
                <div class="modal-sisalto">
                    <span class="close" id="suljeEditTapahtumaModal">&times;</span>
                    <form id="editTapahtumaLomake">
                        <input type="hidden" id="edit_id">
                        <input type="text" id="edit_nimi" placeholder="Nimi" required>
                        <input type="date" id="edit_alku_pvm" required>
                        <input type="time" id="edit_alku_aika" required>
                        <input type="date" id="edit_loppu_pvm" required>
                        <input type="time" id="edit_loppu_aika" required>
                        <input type="text" id="edit_kuvaus" placeholder="Kuvaus">
                        <input type="text" id="edit_luokkaus" placeholder="Luokkaus" list="luokkaus-lista">
                        <datalist id="luokkaus-lista"></datalist>
                        <label for="edit_tarkeys">Tärkeys</label>
                        <select id="edit_tarkeys">
                            <option value="0">Ei tärkeä</option>
                            <option value="1">Tärkeä</option>
                            <option value="2">Erittäin tärkeä</option>
                        </select>
                        <button type="submit">Tallenna muutokset</button>
                        <button type="button" id="peruutaEdit">Peruuta</button>
                    </form>
                </div>
            </div>
        </div>
        <div id="column-2">
    <div id="tapahtuma-container">
        <h3>Tapahtumat</h3>
        <div id="tapahtumat-wrapper">
            <div id="tapahtumat"></div>
        </div>

        <div id="quick-filter" style="margin-bottom: 10px;">
            <label for="pikasuodatin">Pikasuodatin:</label>
            <select id="pikasuodatin">
                <option value="tämäviikko" selected>Tällä viikolla</option>
                <option value="tanaan">Tänään</option>
                <option value="tämäkuukausi">Tässä kuussa</option>
                <option value="menneetX">Viimeiset X päivää</option>
                <option value="tulevatX">Seuraavat X päivää</option>
            </select>
            <input type="number" id="pikasuodatinX" min="1" value="5" style="width:60px;display:none;" />
            <button id="toggleAdvancedFilter" type="button" style="margin-left:10px;">Lisäasetukset</button>
        </div>

        <div id="suodatin" style="display:none;">
            <div style="clear:both"></div>
            <div>
                <label for="suodataPaivamaarasta">Näytä tapahtumat väliltä:</label>
                <input type="date" id="suodataPaivamaarasta">
                <span>–</span>
                <input type="date" id="suodataPaivamaaraan">
                <button id="suodataNappi" type="button">Suodata</button>
                <button id="suodataTulevat" type="button">Tulevat ja käynnissä</button>
            </div>
            <div>
                <label for="suodatinKategoria">Luokkaus:</label>
                <select id="suodatinKategoria">
                    <option value="">Kaikki</option>
                </select>
                <label for="suodataTarkeys">Tärkeys:</label>
                <select id="suodataTarkeys">
                    <option value="">Kaikki</option>
                    <option value="0">Ei tärkeä</option>
                    <option value="1">Tärkeä</option>
                    <option value="2">Erittäin tärkeä</option>
                </select>
                <label for="suodataAvainsanat">Hakusana:</label>
                <input type="text" id="suodataAvainsanat" placeholder="Nimi tai kuvaus">
            </div>
        </div>
        <div id="luokkaukset-container">
            <h3>Luokkaukset</h3>
            <ul id="kategoriaLista" style="list-style:none"></ul>
        </div>
    </div>
</div>
<script>

const toggleBtn = document.getElementById('toggleAdvancedFilter');
const suodatinDiv = document.getElementById('suodatin');
let advancedOpen = false;

toggleBtn.onclick = function() {
    advancedOpen = !advancedOpen;
    if (advancedOpen) {
        suodatinDiv.style.display = '';
        toggleBtn.textContent = 'Sulje lisäasetukset';
    } else {
        suodatinDiv.style.display = 'none';
        toggleBtn.textContent = 'Lisäasetukset';
    }
};

window.addEventListener('DOMContentLoaded', function() {
    document.getElementById('pikasuodatin').value = 'tämäviikko';
    if (typeof window.rendertapahtumat === "function" && window.kaikkiTapahtumat) {
        window.rendertapahtumat(window.kaikkiTapahtumat);
    }
});
</script>
    <!-- JavaScripti -->
    <script src="script/main.js"></script>
    <script src="script/luokkaus.js"></script>
    <script src="script/tapahtumat.js"></script>
    <script src="script/tapahtuma_lomake.js"></script>
    <script src="script/tapahtuma_lista.js"></script>
    <script src="script/nyky_paivamaara.js"></script>
    <script src="script/muistiinpanot.js"></script>
    <!-- UI -->
    <script type="module" src="script/ui/kuukausi/index.js"></script>
    <script type="module" src="script/ui/viikko/index.js"></script>
    <script src="script/muistiinpanot.js"></script>
    <!-- tyylit -->
    <link rel="stylesheet" href="style/perusrakennus.css">
    <link rel="stylesheet" href="style/varit.css">
</html>